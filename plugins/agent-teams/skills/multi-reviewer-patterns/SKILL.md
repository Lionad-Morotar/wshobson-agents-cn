---
name: multi-reviewer-patterns
description: 跨多个质量维度协调并行代码审查,具有发现去重、严重程度校准和综合报告。在组织多审查者代码审查、校准发现严重程度或整合审查结果时使用此技能。
version: 1.0.2
---

# 多审查者模式

跨多个质量维度协调并行代码审查、去重发现、校准严重程度并生成综合报告的模式。

## 何时使用此技能

- 组织多维度代码审查
- 决定分配哪些审查维度
- 从多个审查者去重发现
- 一致地校准严重程度评级
- 生成综合审查报告

## 审查维度分配

### 可用维度

| 维度         | 焦点                                   | 何时包含                                       |
| ------------ | -------------------------------------- | ---------------------------------------------- |
| **安全**     | 漏洞、认证、输入验证                    | 始终用于处理用户输入或认证的代码               |
| **性能**     | 查询效率、内存、缓存                    | 当更改数据访问或热路径时                       |
| **架构**     | SOLID、耦合、模式                       | 对于结构更改或新模块                           |
| **测试**     | 覆盖、质量、边缘情况                    | 当添加新功能时                                 |
| **可访问性** | WCAG、ARIA、键盘导航                    | 对于 UI/前端更改                               |

### 推荐组合

| 场景               | 维度                                                      |
| ------------------ | --------------------------------------------------------- |
| API 端点更改       | 安全、性能、架构                                           |
| 前端组件           | 架构、测试、可访问性                                       |
| 数据库迁移         | 性能、架构                                                 |
| 认证更改           | 安全、测试                                                 |
| 完整功能审查       | 安全、性能、架构、测试                                     |

## 发现去重

当多个审查者在同一位置报告问题时:

### 合并规则

1. **相同 file:line,相同问题** — 合并为一个发现,归功所有审查者
2. **相同 file:line,不同问题** — 保留为单独的发现
3. **相同问题,不同位置** — 保留单独但交叉引用
4. **冲突的严重程度** — 使用较高的严重程度评级
5. **冲突的建议** — 包含两者并归因于审查者

### 去重过程

```
对于所有审查者报告中的每个发现:
  1. 检查另一个发现是否引用相同的 file:line
  2. 如果是,检查它们是否描述相同的问题
  3. 如果相同问题:合并,保留更详细的描述
  4. 如果不同问题:保留两者,标记为"共位置"
  5. 使用合并发现中的最高严重程度
```

## 严重程度校准

### 严重程度标准

| 严重程度   | 影响                                       | 可能性           | 示例                                               |
| ---------- | ------------------------------------------ | ---------------- | -------------------------------------------------- |
| **严重**   | 数据丢失、安全漏洞、完全失败                | 确定或非常可能   | SQL 注入、认证绕过、数据损坏                        |
| **高**     | 重大功能影响、退化                          | 可能             | 内存泄漏、缺失验证、中断的流程                      |
| **中**     | 部分影响、存在变通方法                      | 可能             | N+1 查询、缺失边缘情况、不清楚的错误                |
| **低**     | 最小影响、外观问题                          | 不太可能         | 样式问题、次要优化、命名                            |

### 校准规则

- 外部用户可利用的安全漏洞:始终严重或高
- 热路径中的性能问题:至少中
- 关键路径缺失测试:至少中
- 核心功能的可访问性违规:至少中
- 没有功能影响的代码样式问题:低

## 综合报告模板

```markdown
## 代码审查报告

**目标**: {files/PR/directory}
**审查者**: {dimension-1}, {dimension-2}, {dimension-3}
**日期**: {date}
**已审查文件**: {count}

### 严重发现 ({count})

#### [CR-001] {Title}

**位置**: `{file}:{line}`
**维度**: {Security/Performance/etc.}
**描述**: {what was found}
**影响**: {what could happen}
**修复**: {recommended remediation}

### 高发现 ({count})

...

### 中发现 ({count})

...

### 低发现 ({count})

...

### 摘要

| 维度        | 严重 | 高   | 中   | 低   | 总计 |
| ----------- | ---- | ---- | ---- | ---- | ---- |
| Security    | 1    | 2    | 3    | 0    | 6    |
| Performance | 0    | 1    | 4    | 2    | 7    |
| Architecture| 0    | 0    | 2    | 3    | 5    |
| **总计**    | **1**| **3**| **9**| **5**| **18**|

### 建议

{Overall assessment and prioritized action items}
```
